(function(e){e.fn.extend({geek_carrusel:function(e){geek_carrusel_main=function(e){jQuery(e.root).find(" .item").addClass("invisible");jQuery(e.root).css({position:"absolute"});var t=jQuery(e.root).find(" .item").length;e.total=t;carrusel_main_init_v2(e);jQuery(e.root_main).find(e.controls+" a.next").click(function(t){t.preventDefault();e.direccion="next";carrusel_main_click_v2(e)});jQuery(e.root_main).find(e.controls+" a.prev").click(function(t){t.preventDefault();e.direccion="prev";carrusel_main_click_v2(e)})};carrusel_main_init_v2=function(e){total=e.total;var t=e.start;if(e.min_num%2==0){var n=Math.floor(e.min_num/2);var r=n-1}else{var n=Math.floor(e.min_num/2);var r=n}var i=t-n;var s=t+r;if(i<0){s=s+Math.abs(i);i=0}if(s>=total){i=i-(s-total+1);s=total}console.log(" / p ="+t);console.log(" / p1="+i);console.log("/  p2="+s);console.log("/  total="+total);var o=0;jQuery(e.root).find(" .item").removeClass("carrusel-visible");jQuery(e.root).find(" .item").each(function(e,t){if(e>=i&&e<=s){jQuery(this).addClass("carrusel-visible")}if(e<i){o=o+jQuery(this).outerWidth(true)}jQuery(this).attr("data-pos",e)});if(isNaN(e.sum)){animar_action(-o,e)}else{animar_action(-e.sum,e)}};carrusel_main_click_v2=function(e){if(jQuery(e.root).hasClass("animando")){return false}jQuery(e.root).addClass("animando");if(e.direccion=="next"){var t=jQuery(e.root).find(" .carrusel-visible").last().attr("data-pos");var n=e.total-t-1}else{var t=jQuery(e.root).find(" .carrusel-visible").first().attr("data-pos");var n=0+t}if(n>0){var r=jQuery(e.root).find(" .carrusel-visible");if(e.direccion=="prev"){var r=r.get().reverse()}jQuery(r).each(function(e,t){if(n>0){jQuery(this).addClass("carrusel-temp");jQuery(this).removeClass("carrusel-visible");n--}});if(e.direccion=="next"){var t=parseInt(jQuery(e.root).find(" .carrusel-temp").last().attr("data-pos"));var i=function(e,t,n){return e>t&&e<=t+n}}else{var t=parseInt(jQuery(e.root).find(" .carrusel-temp").first().attr("data-pos"));var i=function(e,t,n){return e>=t-n&&e<t}}jQuery(e.root).find(" .item").each(function(n,r){if(i(n,t,e.min_num)){jQuery(this).addClass("carrusel-visible")}});animar(e)}else{optionsTemp=e;optionsTemp.start=0;optionsTemp.sum=0;carrusel_main_init_v2(optionsTemp)}};animar=function(e){var t=0;jQuery(e.root).find(" .carrusel-temp").each(function(e,n){t=t+jQuery(this).outerWidth(true)});var n=parseInt(jQuery(e.root).css("left"));if(isNaN(n)){n=0}if(e.direccion=="next"){n=n-t}else{n=n+t}animar_action(n,e)};animar_action=function(e,t){jQuery(t.root).animate({left:e+"px"},600,function(){jQuery(t.root).find(" .carrusel-temp").removeClass("carrusel-temp");jQuery(t.root).removeClass("animando")})};return this.each(function(t,n){var r=jQuery.extend(true,{},e);r.root=jQuery(this).find("ul");r.root_main=jQuery(this);geek_carrusel_main(r)})}})})(jQuery)